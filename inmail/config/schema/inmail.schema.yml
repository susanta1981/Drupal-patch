# Module settings
inmail.settings:
  label: 'Inmail settings'
  type: config_object
  mapping:
    return_path:
      label: 'Return-Path address'
      type: email

# Config entities
inmail.analyzer.*:
  label: 'Message analyzer'
  type: config_entity
  mapping:
    id:
      label: 'Machine-name'
      type: string
    label:
      label: 'Label'
      type: label
    plugin:
      label: 'Plugin'
      type: string
    configuration:
      label: 'Configuration'
      type: inmail.plugin.analyzer.[%parent.plugin]
    weight:
      label: 'Weight'
      type: integer

inmail.handler.*:
  label: 'Message handler'
  type: config_entity
  mapping:
    id:
      label: 'Machine-name'
      type: string
    label:
      label: 'Label'
      type: label
    plugin:
      label: 'Plugin'
      type: string
    configuration:
      label: 'Configuration'
      type: inmail.plugin.handler.[%parent.plugin]

inmail.deliverer.*:
  label: 'Mail deliverer'
  type: config_entity
  mapping:
    id:
      label: 'Machine-name'
      type: string
    label:
      label: 'Label'
      type: label
    plugin:
      label: 'Plugin'
      type: string
    configuration:
      label: 'Configuration'
      type: inmail.plugin.deliverer.[%parent.plugin]

# Empty default configuration schema
inmail.plugin.analyzer.*:
  label: 'Analyzer configuration'
  type: mapping

inmail.plugin.handler.*:
  label: 'Handler configuration'
  type: mapping

inmail.plugin.deliverer.*:
  label: 'Deliverer configuration'
  type: mapping
  mapping:
    config_id:
      label: 'Config ID'
      type: string

# Specific analyzer/handler configuration
inmail.plugin.handler.moderator_forward:
  label: 'Moderator Forward handler configuration'
  type: mapping
  mapping:
    moderator:
      label: 'Moderator address'
      type: email

inmail.plugin.deliverer.imap:
  label: 'IMAP Deliverer'
  type: inmail.plugin.deliverer.*
  mapping:
    host:
      label: 'Host'
      type: string
    ssl:
      label: 'SSL'
      type: boolean
    port:
      label: 'Port'
      type: integer
    username:
      label: 'Username'
      type: string
    password:
      label: 'Password'
      type: string
    batch_size:
      label: 'Batch size'
      type: integer
